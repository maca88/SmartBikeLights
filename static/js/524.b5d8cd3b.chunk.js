"use strict";(self.webpackChunklight_configurator=self.webpackChunklight_configurator||[]).push([[524],{1524:(e,t,i)=>{i.r(t),i.d(t,{default:()=>fe});var n=i(2791),l=i(4098),s=i(1889),o=i(32),r=i(3708),a=i(1161),d=i(6934),c=i(890),h=i(7621),g=i(9504),u=i(9585),x=i(7296),m=i(1115),j=i(4207),v=i(9225),Z=i(876),p=i(493),b=i(1509),f=i(8305),C=i(3214),P=i(584),T=i(1368),y=i(923),D=i(4181),M=i(9499),I=i(2033),w=i(9155),k=i(2464),S=i(184);const N=(0,o.Pi)((e=>{let{configuration:t,action:i}=e;return(0,S.jsxs)("div",{children:[(0,S.jsx)(s.ZP,{container:!0,spacing:3,sx:{marginBottom:2},children:(0,S.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,S.jsx)(a.Z,{items:r.Nx,label:"Press tone",setter:i.setToneId,value:i.toneId})})}),(0,S.jsx)(w.Z,{configuration:t,getHeadlightNode:e=>(0,S.jsx)(k.Z,{lightIconTapBehavior:i.headlightTapBehavior,lightModes:e.modes}),getTaillightNode:e=>(0,S.jsx)(k.Z,{lightIconTapBehavior:i.taillightTapBehavior,lightModes:e.modes})})]})}));var L=i(1182);const B=(0,o.Pi)((e=>{let{configuration:t,action:i}=e;const n=i.headlightMode,l=i.taillightMode;return(0,S.jsxs)("div",{children:[(0,S.jsx)(s.ZP,{container:!0,spacing:3,sx:{marginBottom:2},children:(0,S.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,S.jsx)(a.Z,{items:r.Nx,label:"Press tone",setter:i.setToneId,value:i.toneId})})}),(0,S.jsx)(w.Z,{configuration:t,getHeadlightNode:e=>(0,S.jsx)(L.Z,{controlMode:n.controlMode,setControlMode:n.setControlMode,lightMode:n.lightMode,setLightMode:n.setLightMode,lightModes:e.modes}),getTaillightNode:e=>(0,S.jsx)(L.Z,{controlMode:l.controlMode,setControlMode:l.setControlMode,lightMode:l.lightMode,setLightMode:l.setLightMode,lightModes:e.modes})})]})})),F=(0,o.Pi)((e=>{let{action:t}=e;return(0,S.jsxs)(s.ZP,{container:!0,spacing:3,sx:{marginBottom:2},children:[(0,S.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,S.jsx)(a.Z,{required:!0,items:r.JA,label:"Configuration",setter:t.setConfigurationId,value:t.configurationId})}),(0,S.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,S.jsx)(a.Z,{items:r.Nx,label:"Press tone",setter:t.setToneId,value:t.toneId})})]})}));var q=i(5527),A=i(3400),H=i(7247),G=i(866),E=i(1401);const O=(0,d.ZP)(s.ZP)((e=>{let{theme:t}=e;return{flexGrow:1,marginTop:t.spacing(1)}})),U=(0,o.Pi)((e=>{let{buttonAction:t}=e;const[i,o]=n.useState({toneIndex:0}),d=(0,l.aD)((()=>{t.tones.push(new G.Z(i.toneIndex)),o({...i,toneIndex:i.toneIndex+1})})),h=(0,l.aD)((e=>{t.tone.remove(e)})),g=(0,l.aD)((()=>{t.toneSequence.push(new E.Z)})),u=(0,l.aD)((e=>{t.toneSequence.remove(e)}));return(0,S.jsxs)(s.ZP,{container:!0,spacing:3,sx:{marginBottom:2},children:[(0,S.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,S.jsx)(a.Z,{required:!0,items:r.zj,label:"Tone type",setter:t.setToneTypeId,value:t.toneTypeId})}),2===t.toneTypeId?(0,S.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,S.jsx)(P.Z,{required:!0,label:"Repeat count",type:"number",value:t.repeatCount,setter:t.setRepeatCount})}):null,1===t.toneTypeId?(0,S.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,S.jsx)(a.Z,{required:!0,items:r.Nx,label:"Press tone",setter:t.setToneId,value:t.toneId})}):2===t.toneTypeId?(0,S.jsxs)(s.ZP,{item:!0,container:!0,xs:12,children:[(0,S.jsx)(s.ZP,{item:!0,xs:12,children:(0,S.jsx)(c.Z,{variant:"h5",children:"Tones"})}),(0,S.jsx)(s.ZP,{item:!0,container:!0,xs:12,children:t.tones.map((e=>(0,S.jsxs)(O,{container:!0,children:[(0,S.jsx)(s.ZP,{item:!0,xs:!0,children:(0,S.jsx)(q.Z,{sx:{padding:2,marginBottom:1},children:(0,S.jsxs)(s.ZP,{container:!0,spacing:3,children:[(0,S.jsx)(s.ZP,{item:!0,xs:12,sm:4,children:(0,S.jsx)(P.Z,{required:!0,label:"Name",value:e.name,setter:e.setName})}),(0,S.jsx)(s.ZP,{item:!0,xs:12,sm:4,children:(0,S.jsx)(P.Z,{required:!0,label:"Frequency",type:"number",value:e.frequency,setter:e.setFrequency})}),(0,S.jsx)(s.ZP,{item:!0,xs:12,sm:4,children:(0,S.jsx)(P.Z,{required:!0,label:"Duration [ms]",type:"number",value:e.duration,setter:e.setDuration})})]})})}),(0,S.jsx)(s.ZP,{item:!0,xs:1,sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,S.jsx)(s.ZP,{container:!0,sx:{margin:0},children:(0,S.jsx)(s.ZP,{item:!0,xs:12,sm:12,sx:{display:"flex",justifyContent:"center"},children:(0,S.jsx)(A.Z,{"aria-label":"remove",onClick:()=>h(e),size:"large",children:(0,S.jsx)(H.Z,{})})})})})]},e.id)))}),(0,S.jsx)(T.Z,{onClick:()=>d(),children:"Create Tone"}),(0,S.jsx)(s.ZP,{item:!0,xs:12,sx:{marginTop:3},children:(0,S.jsx)(c.Z,{variant:"h5",children:"Sequence"})}),t.toneSequence.map(((e,i)=>(0,S.jsx)(O,{item:!0,container:!0,xs:12,children:(0,S.jsxs)(s.ZP,{container:!0,children:[(0,S.jsx)(s.ZP,{item:!0,xs:!0,children:(0,S.jsx)(q.Z,{sx:{padding:2,marginBottom:1},children:(0,S.jsx)(s.ZP,{container:!0,spacing:3,children:(0,S.jsx)(s.ZP,{item:!0,xs:12,children:(0,S.jsx)(a.Z,{items:t.tones,required:!0,label:"Tone",setter:e.setToneId,value:e.toneId})})})})}),(0,S.jsx)(s.ZP,{item:!0,xs:1,sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,S.jsx)(s.ZP,{container:!0,sx:{margin:0},children:(0,S.jsx)(s.ZP,{item:!0,xs:12,sm:12,sx:{display:"flex",justifyContent:"center"},children:(0,S.jsx)(A.Z,{"aria-label":"remove",onClick:()=>u(e),size:"large",children:(0,S.jsx)(H.Z,{})})})})})]})},e.id))),(0,S.jsx)(T.Z,{onClick:()=>g(),children:"Add Tone"})]}):null]})})),V=["A","B"],R=r.gQ.filter((e=>V.indexOf(e.id)<0)),W=e=>e?r.hK:r.hK.filter((e=>3!==e.id)),z=(0,o.Pi)((e=>{let{configuration:t,device:i,actions:o,enableDoubleClick:d}=e;const[h,g]=n.useState(W(d));(0,n.useEffect)((()=>{g(W(d))}),[d,g]);const u=(0,l.aD)((e=>{o.remove(e)})),x=e=>o.indexOf(e)>0,m=(0,l.aD)((e=>{(0,r.OF)(o,e)})),j=e=>o.indexOf(e)<o.length-1,v=(0,l.aD)((e=>{(0,r.Xc)(o,e)})),Z=(0,l.aD)((e=>{e.conditions.push(new I.Z)}));return o.map((e=>(0,S.jsxs)(b.Z,{TransitionProps:{unmountOnExit:!0},expanded:e.open,onChange:()=>(e=>{e.setOpen(!e.open)})(e),children:[(0,S.jsx)(f.Z,{item:e,validationParameter:t,validationParameter2:i,removeCallback:u,canMoveUpCallback:x,moveUpCallback:m,canMoveDownCallback:j,moveDownCallback:v}),(0,S.jsxs)(C.Z,{children:[(0,S.jsxs)(s.ZP,{container:!0,spacing:3,sx:{marginBottom:3},children:[(0,S.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,S.jsx)(a.Z,{items:r.sI,required:!0,label:"Action type",setter:e.setActionType,value:e.actionType})}),(0,S.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,S.jsx)(a.Z,{items:h,required:!0,label:"Trigger",setter:e.setTriggerId,value:e.triggerId})})]}),1===e.actionType?(0,S.jsx)(N,{configuration:t,action:e}):2===e.actionType?(0,S.jsx)(B,{configuration:t,action:e}):3===e.actionType?(0,S.jsx)(F,{action:e}):4===e.actionType?(0,S.jsx)(U,{buttonAction:e}):null,null!=e.actionType?(0,S.jsx)(s.ZP,{container:!0,spacing:3,sx:{marginTop:2},children:(0,S.jsx)(s.ZP,{item:!0,xs:12,children:(0,S.jsx)(c.Z,{variant:"h5",gutterBottom:!0,children:"Conditions"})})}):null,null!=e.actionType?(0,S.jsxs)(n.Fragment,{children:[(0,S.jsx)("div",{children:(0,S.jsx)(M.Z,{filters:e.conditions,filterTypes:R,device:i})}),(0,S.jsx)(T.Z,{onClick:()=>Z(e),children:"Add Condition"})]}):null]})]},e.id)))}));var _=i(877),J=i(8179);const K=(0,o.Pi)((e=>{let{configuration:t,device:i,remoteController:o,buttons:r}=e;const d=(0,l.aD)((e=>{r.remove(e)})),h=(0,l.aD)((e=>{e.actions.push(new J.Z)}));return r.map((e=>(0,S.jsxs)(b.Z,{TransitionProps:{unmountOnExit:!0},expanded:e.open,onChange:()=>(e=>{e.setOpen(!e.open)})(e),children:[(0,S.jsx)(f.Z,{item:e,validationParameter:t,validationParameter2:i,removeCallback:d,canMoveUpCallback:()=>!1,canMoveDownCallback:()=>!1}),(0,S.jsxs)(C.Z,{children:[(0,S.jsxs)(s.ZP,{container:!0,spacing:3,children:[(0,S.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,S.jsx)(a.Z,{items:o.buttonSelectList,required:!0,label:"Button",setter:e.setButtonId,value:e.buttonId})}),(0,S.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:o.hasStandaloneCenterButton()||1!==e.buttonId?(0,S.jsx)(P.Z,{required:!0,label:"Device number",type:"number",setter:e.setDeviceNumber,value:e.deviceNumber,help:(0,S.jsx)(n.Fragment,{children:(0,S.jsx)(c.Z,{children:"The device number that will be used for the virtual ANT+ light. Do note that changing the device number after the pairing is done will require repeating the pairing process."})})}):null}),(0,S.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,S.jsx)(v.Z,{element:(0,S.jsx)(_.Z,{label:"Enable double-click",setter:e.setEnableDoubleClick,value:e.enableDoubleClick}),help:(0,S.jsx)(c.Z,{gutterBottom:!0,children:"By enabling double-click detection, the action will be delayed up to the set delay as it waits for the second click. If the second click is received after the specified delay, the logic will treat both clicks as single-click."})})}),e.enableDoubleClick?(0,S.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,S.jsx)(P.Z,{required:!0,label:"Double-click delay",type:"number",setter:e.setDoubleClickDelay,value:e.doubleClickDelay})}):null,null!=e.buttonId?(0,S.jsx)(s.ZP,{item:!0,xs:12,sm:12,children:(0,S.jsx)(c.Z,{variant:"h5",gutterBottom:!0,children:"Actions"})}):null]}),null!=e.buttonId?(0,S.jsxs)(n.Fragment,{children:[(0,S.jsx)("div",{children:(0,S.jsx)(z,{configuration:t,device:i,actions:e.actions,enableDoubleClick:e.enableDoubleClick})}),(0,S.jsx)(T.Z,{onClick:()=>h(e),children:"Add Action"})]}):null]})]},e.id)))})),X=(0,o.Pi)((e=>{let{configuration:t,device:i,...o}=e;const d=t.remoteControllers,x=(0,l.aD)((()=>{d.push(new y.Z)})),m=(0,l.aD)((e=>{d.remove(e)})),j=(0,l.aD)((e=>{e.buttons.push(new D.Z(e))}));return(0,S.jsxs)(h.Z,{...o,children:[(0,S.jsx)(u.Z,{sx:{padding:2},title:(0,S.jsx)(v.Z,{element:(0,S.jsx)(c.Z,{variant:"h5",align:"center",children:"Remote Controllers (Experimental)"}),help:(0,S.jsx)(c.Z,{children:"In this section it is possible to configure remote controllers (e.g. Bontrager Transmitr) to control lights, change current configuration or/and play tones."})}),titleTypographyProps:{align:"center"}}),(0,S.jsx)(g.Z,{children:(0,S.jsxs)("div",{children:[(0,S.jsx)(p.Z,{sx:{padding:0},children:d.map((e=>(0,S.jsxs)(b.Z,{TransitionProps:{unmountOnExit:!0},expanded:e.open,onChange:()=>(e=>{e.setOpen(!e.open)})(e),children:[(0,S.jsx)(f.Z,{item:e,validationParameter:t,validationParameter2:i,removeCallback:m,canMoveUpCallback:()=>!1,canMoveDownCallback:()=>!1}),(0,S.jsxs)(C.Z,{children:[(0,S.jsxs)(s.ZP,{container:!0,spacing:3,children:[(0,S.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,S.jsx)(a.Z,{items:r.T_,required:!0,label:"Remote controller",setter:e.setControllerId,value:e.controllerId})}),(0,S.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,S.jsx)(P.Z,{required:!0,label:"Name",setter:e.setName,value:e.name})}),null!=e.controllerId?(0,S.jsx)(s.ZP,{item:!0,xs:12,sm:12,children:(0,S.jsx)(c.Z,{variant:"h5",gutterBottom:!0,children:"Buttons"})}):null]}),null!=e.controllerId?(0,S.jsxs)(n.Fragment,{children:[(0,S.jsx)("div",{children:(0,S.jsx)(K,{remoteController:e,configuration:t,device:i,buttons:e.buttons})}),(0,S.jsx)(T.Z,{onClick:()=>j(e),children:"Setup Button"})]}):null]})]},e.id)))}),(0,S.jsx)("div",{children:(0,S.jsx)(T.Z,{onClick:x,children:"Add Controller"})})]})})]})})),Y=(0,d.ZP)("div")((e=>{let{theme:t}=e;return{"& .MuiCardHeader-root":{backgroundColor:"light"===t.palette.mode?t.palette.grey[200]:t.palette.grey[700]},"& .MuiCardHeader-root .ElementWithHelp-root":{justifyContent:"center"},"& .MuiCard-root":{marginTop:t.spacing(2)}}})),Q=(0,o.Pi)((e=>{let{configuration:t,device:i,deviceList:l}=e;return(0,S.jsxs)(Y,{children:[(0,S.jsx)(Z.Z,{device:i,configuration:t}),(0,S.jsxs)(h.Z,{sx:{marginTop:2},children:[(0,S.jsx)(u.Z,{title:(0,S.jsx)(v.Z,{element:(0,S.jsx)(c.Z,{variant:"h5",align:"center",children:"Global Filters"}),help:(0,S.jsx)(c.Z,{children:"Global filters are the first filters that are checked by the Smart control mode to determine whether the lights can be turned on. In case we define one or more global filters and none them is matched, then the lights won't be turned on. In case we don't define any global filter or at least one of them is matched, then the light mode will be determine by the filters in the below Headlight/Taillight Configuration section."})}),titleTypographyProps:{align:"center"},sx:{padding:.5}}),(0,S.jsxs)(g.Z,{children:[(0,S.jsx)(s.ZP,{item:!0,xs:12,sm:12,children:(0,S.jsx)(v.Z,{sx:{marginBottom:1},element:(0,S.jsx)(c.Z,{variant:"h5",children:"Filter groups"}),help:(0,S.jsxs)(n.Fragment,{children:[(0,S.jsx)(c.Z,{children:"Global filter groups contains a list of groups, where each group can have one or more filters, that are used by the Smart mode to determine whether the lights can be turned on. A filter group is matched, when all filters inside it are matched. Rules:"}),(0,S.jsxs)("ul",{children:[(0,S.jsx)("li",{children:(0,S.jsx)(c.Z,{children:"When no filters groups are added or at least one of them is matched, the light mode will be determined by the below Headlight/Taillight Configuration section"})}),(0,S.jsx)("li",{children:(0,S.jsx)(c.Z,{children:"When one or more filters groups are added and none of them is matched, then the lights won't be turned on"})})]}),(0,S.jsx)(c.Z,{children:"They are useful when having a condition that applies to all lights. For example, in case we want the lights to be turned on only when recording an activity."})]})})}),(0,S.jsx)(x.Z,{filterGroups:t.globalFilterGroups,device:i,totalLights:t.getTotalLights()})]})]}),(0,S.jsx)(m.Z,{globalFilterGroups:t.globalFilterGroups,useIndividualNetwork:t.useIndividualNetwork,device:i,totalLights:t.getTotalLights(),lightType:"Headlight",lightList:(0,r.oj)(i,r.Tl,t.useIndividualNetwork),lightFilterGroups:t.headlightFilterGroups,light:t.headlight,setLight:t.setHeadlight,setLightModes:t.setHeadlightModes,setAdditionalLightModes:t.setHeadlightAdditionalModes,setDefaultMode:t.setHeadlightDefaultMode,defaultMode:t.headlightDefaultMode,lightPanel:t.headlightPanel,setLightPanel:t.setHeadlightPanel,lightSettings:t.headlightSettings,setLightSettings:t.setHeadlightSettings,deviceNumber:t.headlightDeviceNumber,setDeviceNumber:t.setHeadlightDeviceNumber,serialNumber:t.headlightSerialNumber,setSerialNumber:t.setHeadlightSerialNumber,forceSmartMode:t.headlightForceSmartMode,setForceSmartMode:t.setHeadlightForceSmartMode,lightIconTapBehavior:t.headlightIconTapBehavior,setLightIconTapBehavior:t.setHeadlightIconTapBehavior,lightIconColor:t.headlightIconColor,setLightIconColor:t.setHeadlightIconColor}),(0,S.jsx)(m.Z,{globalFilterGroups:t.globalFilterGroups,useIndividualNetwork:t.useIndividualNetwork,device:i,totalLights:t.getTotalLights(),lightType:"Taillight",lightList:(0,r.oj)(i,r.IY,t.useIndividualNetwork),light:t.taillight,setLight:t.setTaillight,setLightModes:t.setTaillightModes,setAdditionalLightModes:t.setTaillightAdditionalModes,lightFilterGroups:t.taillightFilterGroups,setDefaultMode:t.setTaillightDefaultMode,defaultMode:t.taillightDefaultMode,lightPanel:t.taillightPanel,setLightPanel:t.setTaillightPanel,lightSettings:t.taillightSettings,setLightSettings:t.setTaillightSettings,deviceNumber:t.taillightDeviceNumber,setDeviceNumber:t.setTaillightDeviceNumber,serialNumber:t.taillightSerialNumber,setSerialNumber:t.setTaillightSerialNumber,forceSmartMode:t.taillightForceSmartMode,setForceSmartMode:t.setTaillightForceSmartMode,lightIconTapBehavior:t.taillightIconTapBehavior,setLightIconTapBehavior:t.setTaillightIconTapBehavior,lightIconColor:t.taillightIconColor,setLightIconColor:t.setTaillightIconColor}),(0,r.Ex)(i)?(0,S.jsx)(X,{configuration:t,device:i}):null,(0,S.jsx)(j.Z,{configuration:t,deviceList:l})]})}));var $=i(2150),ee=i(4554),te=i(9877),ie=i(3329),ne=i(5574),le=i(7123),se=i(9157),oe=i(1691),re=i(5661),ae=i(1419),de=i(765),ce=i(5523),he=i(9658),ge=i(6151),ue=i(892),xe=i(9947);class me{constructor(e,t){this.saveMode=null,this.name="",this.isNew=!1,this.setName=e=>{this.name=e},this.setSaveMode=e=>{this.saveMode=e},this.saveMode=e?"override":"new",this.name=t||"",this.isNew=!e,(0,l.ky)(this,{id:!1})}isValid(){return"override"===this.saveMode&&this.name||this.name}}const je=(0,o.Pi)((e=>{var t;let{configuration:i,setConfiguration:l,deviceList:o,currentUser:r}=e;const[d,c]=n.useState({parseError:!1,showDeleteDialog:!1,showSaveDialog:!1,saveDialogModel:new me(!1,null)}),h=()=>{c((e=>({...e,showSaveDialog:!1})))},g=()=>{c((e=>({...e,showDeleteDialog:!1})))};return r?(0,S.jsxs)(s.ZP,{container:!0,spacing:2,sx:{marginBottom:4},justifyContent:"center",children:[(0,S.jsx)(s.ZP,{item:!0,xs:8,sm:10,children:(0,S.jsx)(a.Z,{label:"Saved configurations",items:ue.Z.userConfigurations,setter:e=>{let t=!1;if(e){const i=ue.Z.userConfigurations.find((t=>t.id===e));t=!(e=>{let t=null;try{t=xe.Z.parse(e,o),t&&l(t)}catch{}finally{return t}})(i.value)}else l(new xe.Z);ue.Z.setSelectedConfiguration(e),c((e=>({...e,parseError:t})))},value:ue.Z.selectedConfiguration})}),(0,S.jsxs)(s.ZP,{item:!0,xs:4,sm:2,sx:{marginBottom:"auto",marginTop:"auto"},children:[(0,S.jsx)(ge.Z,{variant:"contained",disabled:!ue.Z.selectedConfiguration||d.parseError,onClick:()=>{navigator.clipboard.writeText(i.getConfigurationValue(o))},children:"Copy"}),(0,S.jsx)(A.Z,{color:"error",disabled:!ue.Z.selectedConfiguration,style:{marginLeft:"0.5em",padding:"0"},onClick:()=>{c((e=>({...e,showDeleteDialog:!0})))},size:"large",children:(0,S.jsx)(H.Z,{})}),(0,S.jsxs)(ne.Z,{open:d.showDeleteDialog,onClose:g,"aria-labelledby":"delete-dialog-title","aria-describedby":"delete-dialog-description",children:[(0,S.jsx)(re.Z,{sx:{minWidth:300},id:"delete-dialog-title",children:"Delete configuration"}),(0,S.jsx)(se.Z,{children:(0,S.jsx)(oe.Z,{id:"delete-dialog-description",children:"Do you want to delete the selected configuration?"})}),(0,S.jsxs)(le.Z,{children:[(0,S.jsx)(ge.Z,{onClick:g,children:"No"}),(0,S.jsx)(ge.Z,{onClick:async()=>{await ue.Z.deleteConfigurationAsync(ue.Z.selectedConfiguration),c((e=>({...e}))),g()},autoFocus:!0,children:"Yes"})]})]}),(0,S.jsxs)(ne.Z,{open:d.showSaveDialog,onClose:h,"aria-labelledby":"save-dialog-title","aria-describedby":"save-dialog-description",children:[(0,S.jsx)(re.Z,{sx:{minWidth:300},id:"save-dialog-title",children:"Save configuration"}),(0,S.jsx)(se.Z,{children:null!==(t=d.saveDialogModel)&&void 0!==t&&t.isNew?(0,S.jsx)(P.Z,{required:!0,label:"Configuration name",setter:d.saveDialogModel.setName,value:d.saveDialogModel.name}):(0,S.jsxs)("div",{children:[(0,S.jsxs)(de.Z,{defaultValue:"override",value:d.saveDialogModel.saveMode,onChange:e=>d.saveDialogModel.setSaveMode(e.target.value),name:"radio-buttons-group",children:[(0,S.jsx)(ce.Z,{value:"override",control:(0,S.jsx)(ae.Z,{}),label:"Override existing configuration"}),(0,S.jsx)(ce.Z,{value:"new",control:(0,S.jsx)(ae.Z,{}),label:"Save as a new configuration"})]}),(0,S.jsx)(P.Z,{required:!0,label:"Configuration name",setter:d.saveDialogModel.setName,value:d.saveDialogModel.name})]})}),(0,S.jsxs)(le.Z,{children:[(0,S.jsx)(ge.Z,{onClick:h,children:"Cancel"}),(0,S.jsx)(ge.Z,{disabled:!d.saveDialogModel.isValid(),onClick:async()=>{let e=ue.Z.selectedConfiguration;"new"===d.saveDialogModel.saveMode?e=await ue.Z.saveConfigurationAsync(d.saveDialogModel.name,i.getConfigurationValue(o)):await ue.Z.updateConfigurationAsync(e,d.saveDialogModel.name,i.getConfigurationValue(o)),ue.Z.setSelectedConfiguration(e),h()},autoFocus:!0,children:"Confirm"})]})]})]}),d.parseError?(0,S.jsx)(s.ZP,{item:!0,xs:12,sm:12,children:(0,S.jsx)(he.Z,{severity:"error",children:"Invalid configuration."})}):null,i&&i.isValid(o)?(0,S.jsx)(ee.Z,{style:{margin:0,top:"auto",right:20,bottom:20,left:"auto",position:"fixed"},children:(0,S.jsx)(te.Z,{color:"primary",title:"Save","aria-label":"add",onClick:()=>{const e=ue.Z.selectedConfiguration;let t;e&&(t=ue.Z.userConfigurations.find((t=>t.id===e))),c((i=>{var n;return{...i,showSaveDialog:!0,saveDialogModel:new me(null!=e,null===(n=t)||void 0===n?void 0:n.name)}}))},children:(0,S.jsx)(ie.Z,{})})}):null]}):null}));var ve=i(8205),Ze=i(4690),pe=i(533);const be=(0,ve.J)(),fe=(0,o.Pi)((e=>{let{configuration:t,setConfiguration:i,currentUser:n}=e;const o=(0,l.aD)((e=>{i(e)}));return(0,S.jsxs)("div",{children:[(0,S.jsxs)(he.Z,{severity:"info",children:["Hard to understand? ",(0,S.jsx)(pe.Z,{target:"_blank",rel:"noopener",href:"https://github.com/maca88/SmartBikeLights/wiki/Lights-Configurator",children:"Check the documentation"})]}),(0,S.jsx)(je,{configuration:t,setConfiguration:i,deviceList:Ze.deviceList,currentUser:n}),(0,S.jsx)($.Z,{setConfiguration:o,deviceList:Ze.deviceList}),(0,S.jsxs)(s.ZP,{container:!0,spacing:2,sx:{marginBottom:2},justifyContent:"center",children:[(0,S.jsx)(s.ZP,{item:!0,xs:12,sm:4,children:(0,S.jsx)(a.Z,{required:!0,items:Ze.deviceList,label:"Garmin device",setter:t.setDevice,value:t.device})}),(0,S.jsx)(s.ZP,{item:!0,xs:6,sm:4,children:(0,S.jsx)(a.Z,{required:!0,items:r.d9,label:"Units",setter:t.setUnits,value:t.units})}),(0,S.jsx)(s.ZP,{item:!0,xs:6,sm:4,children:(0,S.jsx)(a.Z,{required:!0,items:r.XN,label:"Time format",setter:t.setTimeFormat,value:t.timeFormat})})]}),t.device?(0,S.jsxs)("div",{children:[(0,S.jsx)(s.ZP,{container:!0,spacing:2,sx:{marginBottom:2},justifyContent:"left",children:(0,S.jsx)(s.ZP,{item:!0,xs:12,sm:4,children:(0,S.jsx)(a.Z,{required:!0,items:(0,r.DB)((0,Ze.getDevice)(t.device)),label:"Separator color",setter:t.setSeparatorColor,value:t.separatorColor,itemTemplateFunc:be})})}),(0,S.jsx)(Q,{configuration:t,device:(0,Ze.getDevice)(t.device),deviceList:Ze.deviceList})]}):null]})}))}}]);
//# sourceMappingURL=524.b5d8cd3b.chunk.js.map